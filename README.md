# pyTestHarness: The idea #

Testing code should be easy. The functionality required to launch, parse and perform the verification should be light-weight and simple to migrate into existing projects. pyTestHarness supports unit-testing of sequential and MPI-parallel applications. Unit tests can be performed locally, or submitted via a batch queuing system (e.g. PBS, LSF, Slurm or LoadLeveler).

### Key concepts ###

pyTestHarness (pyTH) provides:

* An object to define a unit test. A "unit test" consists of: (i) a textual name; (ii) an executable; (iii) a text file containing the expected output; (iv) a method to compare any output generated by the test (e.g. from stdout or another output file)
* A set of tools to parse / filter and query text files for verification purposes
* An object to manage launching a serial (or MPI) unit test locally, or via a batch queuing system

### How do I use this crap? ###

1. pyTH depends on python3 (or python2) and numpy

2. When using python3, it is highly recommended you set the environment variable PYTHONUNBUFFERED, e.g.
```export PYTHONUNBUFFERED```

3. Make sure you modify your PYTHONPATH environment variable to include the directory ```${PWD}/lib``` (relative to this README file)

####Demonstration of basic unit-testing for serial tests 

1. ```
    cd pth_example1
    python pth_example1.py
   ```

Features: 
(i) comparison with data in a file;
(ii) multiple tests;
(iii) report summary and error log files 
  
####Demonstration of basic unit-testing for serial tests
Features:
(i) unit tests which are defined in separate directories;
(ii) tests can be optionally selected
  
    cd example2
    python pth_example2.py
  
####Demonstration of parallel tests using PETSc code 
Features:
(i) unit test execution of a parallel application which is submitted via a batch queuing system

  
    cd example3
    python pth_example3.py

####Demonstration of the test harness 
Features:
(i) defining a test which does not an expected output file for the verification

  
    cd example5
    python pth_example5.py